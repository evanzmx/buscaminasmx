<!DOCTYPE html>
<html>
<head>
    <title>Buscaminas by eVanzmx</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <style>
        
    </style>
</head>
<body>
    <section id="page-container" rol="page-container">
        <div class="col-lg-12 col-md-10" style="text-align:center;">
            <h1>Buscaminasmx</h1>
            <div class="contact-form"> 
                <form action="#" class="form-inline" role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" name="txtBase" id="txtBase" autoload placeholder="No. Piezas Base">
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" name="txtAltura" id="txtAltura" placeholder="No. Piezas Altura">
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" name="txtMinas" id="txtMinas" placeholder="No. Minas">
                    </div>
                    <div class="form-group">
                        <button type="button" name="btnAction" id="btnAction" class="btn btn-primary">Iniciar</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <script>
    var banInit = false;
    $(function(){
        $('.form-inline input').keyup(function(event) {
            this.value = this.value.replace(/[^0-9\.]/g,'');
        });

        $('button#btnAction').click(function(){
            if(!banInit){
                console.log('Init game');
                //width, heigth and mines values must be filled out
                if (($('input#txtBase').val() != '') && ($('input#txtAltura').val() != '') && $('input#txtMinas').val() != '') {
                    banInit = true;
                    $(this).removeClass('btn-primary').addClass('btn-warning').text('Reiniciar');
                    arrMines = setMines();
                }else{
                    console.log('Show Alert all fields required');
                }
            }else{
                console.log('reset game');
                banInit = false;
                $(this).removeClass('btn-warning').addClass('btn-primary').text('Iniciar');
            }
        });
    });

    function setMines(){
        var Mines  = new Array();
        tFields = $('input#txtBase').val() * $('input#txtAltura').val();
        for (i = 0; i < tFields; i++) {
            tArray = new Array();
            if (i < $('input#txtMinas').val()) {
                tArray[0] = 1; //Agregamos mina
            }else{
                tArray[0] = 0;
            }
            tArray[1] = 0; //prox value, will be set later
            Mines.push(tArray);
        };
        Mines = $.randomize(Mines);
        console.log(Mines);
    }


    //suffle function
    (function($) {
      $.randomize = function(arr) {
        for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);
        return arr;
      };
    })(jQuery);
    </script>
</body>
</html>